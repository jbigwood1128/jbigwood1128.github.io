## Partitioning Using a Random Forest Model

Eddy covariance (EC) retrievals of net ecosystem exchange (NEE) are difficult to partition into gross primary production (GPP) and ecosystem respiration. I used a random forest model (RFM) to identify a fit residual from light response curves and compared it to the fit of a non-rectangular hyperbolic regression. The steps I took to achieve this comparison and partition NEE can be found in the report below. 

***

## Introduction 

  The global carbon flux controls much of earth’s climate but is one of the biggest unknowns in future climate projections. Tropical forests account for approximately one third of photosynthetic CO2 uptake, making them a substantial contributor to global carbon flux (Anav et al., 2015; Beer et al., 2010). Uncertainties in terrestrial carbon sequestration arise from constantly changing land use – such as deforestation and degradation – and ecosystem feedback (NASA Jet Propulsion Laboratory, 2021). One of the largest uncertainties in tropical forests is how photosynthetic productivity, often quantified as gross primary production (GPP), reacts to climate change (Lee et al., 2013). GPP is the rate of photosynthetic CO2 uptake by an ecosystem and a key observable in carbon cycle modeling (Anav et al., 2015). Quantifying GPP in the tropics is especially challenging for two main reasons: CO2 eddy covariance (EC) retrievals of net ecosystem exchange (NEE) are difficult and the separation of NEE into GPP and respiration requires additional observations (Frankenberg et al., 2011; Joiner et al., 2011). Secondly, remote sensing (RS) in the tropics has been hampered by persistent greenness and frequent cloud cover. In particular, persistent greenness makes commonly used vegetative indices unsuitable to determine GPP in the tropics. As a result, we lack robust quantitative links between GPP and RS data. This currently limits the use of satellite RS data to scale local observations and obtain GPP estimates across larger tropical areas. Due to the current limitations of vegetative RS data and its relationship to GPP, more research is necessary to address the intricate connection between photosynthetic efficiency and GPP (Magney et al., 2020).

  To address these uncertainties, I and collaborators from UCLA, UC Davis, and Costa Rica will continue to collect a comprehensive set of in-situ EC, RS, and environmental data at the well-established field site at La Selva Biological Station in La Selva, Costa Rica (10.4306° N, 84.0070° W). Figure 1 shows the comprehensive field setup we have set up at La Selva. From these instruments, data is collected and stored in google drive. The datasets necessary to partition NEE include the eddy covariance flux data, the storage data from the tower’s profile system, and the biometeorological data that contains various meteorological parameters. Combining these datasets after pre-processing and calculating the total NEE for CO2 allows for the application of a non-rectangular hyperbolic regression, which is a commonly used regression model for this type of data and NEE partitioning (Frankenberg et al., 2011). I will then compare this fit residual to a RFM using a bagging method since the data is quite noisy. This is partially due to the preprocessing specifications, such as the data timeframe. For the purposes of this project, I chose to preprocess the data in half hourly timesteps, which I discuss further in the following section. 

  Partitioning the light response curves will provide the opportunity to further analyze vegetative responses to climate forcings and identify temporal differences between wetter and dryer time periods in Costa Rica (Oberbauer et al., 2000). The results indicate GPP levels that agree with previous findings of GPP estimations in the tropics. Interestingly enough, the data supports the notion that the forest is more productive in the dry periods. Ultimately this work can be used to develop upscaling methods to create a full spatial and temporal map of photosynthesis in the tropics (Frankenberg et al., 2011, Oberbauer et al., 2000). 

## Data

Here is an overview of the dataset, how it was obtained and the preprocessing steps taken, with some plots!

![](assets/IMG/datapenguin.png){: width="500" }

*Figure 1: Here is a caption for my diagram. This one shows a pengiun [1].*

## Modelling

Here are some more details about the machine learning approach, and why this was deemed appropriate for the dataset. 

The model might involve optimizing some quantity. You can include snippets of code if it is helpful to explain things.

```python
from sklearn.ensemble import ExtraTreesClassifier
from sklearn.datasets import make_classification
X, y = make_classification(n_features=4, random_state=0)
clf = ExtraTreesClassifier(n_estimators=100, random_state=0)
clf.fit(X, y)
clf.predict([[0, 0, 0, 0]])
```

This is how the method was developed.

## Results

Figure X shows... [description of Figure X].

## Discussion

From Figure X, one can see that... [interpretation of Figure X].

## Conclusion

Here is a brief summary. From this work, the following conclusions can be made:
* first conclusion
* second conclusion

Here is how this work could be developed further in a future project.

## References
[1] DALL-E 3

[back](./)
